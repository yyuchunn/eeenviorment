<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>通網節能e三方</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Indie+Flower&display=swap" rel="stylesheet">

</head>

<body id="vip">
    <header>
        <!-- navbar 表示這是一個 flex-box -->
        <!-- navbar-expand-md 負責轉手機版的寬度, lg:991以下轉手機版, md:767以下轉手機版, sm:575以下轉手機版 -->
        <!-- navbar-dark讓文字為白色, bg-dark負責背景顏色為暗底 -->
        <!-- fixed-top固定導覽列在最上方-->
        <nav class="navbar navbar-expand-md navbar-dark fixed-top">
            <!--  這是 LOGO 文字或圖片  -->
            <a class="navbar-brand" href="home.html">E<sup>3</sup></a>
            <!--  這是手機版時右上角呈現的選單按鈕, 注意:data-target表示按下這個按鈕時要控制展開收合的物件ID名稱  -->
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#Nav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <!-- 這是按鈕上呈現的icon圖案 -->
                <span class="navbar-toggler-icon"></span>
            </button>
            <!-- navbar-collapse表示這個框架區塊是可收展開的, 注意:id名稱必須跟button中的data-target一樣 -->
            <div class="collapse navbar-collapse" id="Nav">
                <ul class="navbar-nav ml-auto">
                    <!-- active表示目前在這個位置,如果不需要則刪除  -->
                    <!-- sr-only 為殘障人士設計 -->
                    <li class="nav-item">
                        <a class="nav-link" href="home.html">首頁<span class="sr-only">(current)</span></a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="lazy.html">懶人版</a>
                    </li>
                    <li class="nav-item active">
                        <a class="nav-link" href="vip.html">客製化</a>
                    </li>
                </ul>
            </div>
        </nav>
    </header>
    <!-- 導覽列結束 -->
    <!-- 選擇 -->
    <div class="container" id="select_area">
        <div class="row justify-content-around align-items-center text-center">
            <div class="col-md-4">
                <h1>洗衣機</h1>
                <img src="image/washing-machine.png" alt="" />
                <select id="washingMachine">
                    <option value="" selected hidden>請選擇家庭成員</option>
                    <option value="1">1~2人</option>
                    <option value="2">3~4人</option>
                    <option value="3">5人↑</option>
                    <option value="4">不需要</option>
                </select>
            </div>
            <div class="col-md-4">
                <h1>冰箱</h1>
                <img src="image/refrigerator.png" />

                <select id="refrigerator">
                    <option value="" selected hidden>請選擇家庭成員</option>
                    <option value="5">1~2人</option>
                    <option value="6">3~4人</option>
                    <option value="7">5人↑</option>
                    <option value="8">不需要</option>
                </select>
            </div>
            <div class="col-md-4">
                <h1>電視</h1>
                <img src="image/watching-tv.png" alt="">
                <select id="tv">
                    <option value="" selected hidden>請選擇電視尺寸</option>
                    <option value="9">50吋以下</option>
                    <option value="10">51~60吋</option>
                    <option value="11">61吋以上</option>
                    <option value="12">不需要</option>
                </select>
            </div>
            <div class="col-md-12">
                <button id="search" class="btn">查詢</button>
                <p>搜尋結果在底下哦！</p>
                <p class="text-right">資料更新日期：2021/06/02</p>
            </div>
        </div>

    </div>
    <!-- 選擇結束 -->
    <!-- 查詢結果 -->
    <div class="container" id="result_area">
        <p class="text-center">年耗電以消耗電量(度/月)×12個月估算，實際耗電量依實際使用狀況而定</p>
        <p>↓按一下即可展開↓</p>
        <div id="accordion">
            <div class="card" id="plan1">
                <div class="card-header">
                    <a class="card-link" data-toggle="collapse" href="#plan1_result">
                        方案一：最高規格
                        <div id="plan1_total" class="total">
                            $XXXX
                        </div>
                    </a>
                </div>
                <div id="plan1_result" class="collapse">
                    <div class="card-body">
                        <h3>洗衣機：</h3>
                        <div id="plan1_washingMachine">
                            <p>品牌名稱 產品型號</p>
                            <p>公升數</p>
                            <p>耗電量</p>
                            <p>$XXXXX</p>
                        </div>
                        <h3>冰箱：</h3>
                        <div id="plan1_refrigerator">
                            <p>品牌名稱 產品型號</p>
                            <p>EF值</p>
                            <p>$XXXXX</p>
                        </div>
                        <h3>電視：</h3>
                        <div id="plan1_tv">
                            <p>品牌名稱 產品型號</p>
                            <p>耗電量</p>
                            <p>$XXXXX</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="card" id="plan2">
                <div class="card-header text-right">
                    <a class="card-link" data-toggle="collapse" href="#plan2_result">
                        方案二：CP值最高<br>
                        (考慮價格、容量跟耗電量綜合評比)
                        <div id="plan2_total" class="total">
                            $XXXX
                        </div>
                    </a>
                </div>
                <div id="plan2_result" class="collapse">
                    <div class="card-body">
                        <h3>洗衣機：</h3>
                        <div id="plan2_washingMachine">
                            <p>品牌名稱 產品型號</p>
                            <p>公升數</p>
                            <p>耗電量</p>
                            <p>$XXXXX</p>
                        </div>
                        <h3>冰箱：</h3>
                        <div id="plan2_refrigerator">
                            <p>品牌名稱 產品型號</p>
                            <p>EF值</p>
                            <p>$XXXXX</p>
                        </div>
                        <h3>電視：</h3>
                        <div id="plan2_tv">
                            <p>品牌名稱 產品型號</p>
                            <p>耗電量</p>
                            <p>$XXXXX</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="card" id="plan3">
                <div class="card-header">
                    <a class="card-link" data-toggle="collapse" href="#plan3_result">
                        方案三：最省電
                        <div id="plan3_total" class="total">
                            $XXXX
                        </div>
                    </a>
                </div>
                <div id="plan3_result" class="collapse">
                    <div class="card-body">
                        <h3>洗衣機：</h3>
                        <div id="plan3_washingMachine">
                            <p>品牌名稱 產品型號</p>
                            <p>公升數</p>
                            <p>耗電量</p>
                            <p>$XXXXX</p>
                        </div>
                        <h3>冰箱：</h3>
                        <div id="plan3_refrigerator">
                            <p>品牌名稱 產品型號</p>
                            <p>EF值</p>
                            <p>$XXXXX</p>
                        </div>
                        <h3>電視：</h3>
                        <div id="plan3_tv">
                            <p>品牌名稱 產品型號</p>
                            <p>耗電量</p>
                            <p>$XXXXX</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="card" id="plan4">
                <div class="card-header text-right">
                    <a class="card-link" data-toggle="collapse" href="#plan4_result">
                        方案四：最便宜
                        <div id="plan4_total" class="total">
                            $XXXX
                        </div>
                    </a>
                </div>
                <div id="plan4_result" class="collapse">
                    <div class="card-body">
                        <h3>洗衣機：</h3>
                        <div id="plan4_washingMachine">
                            <p>品牌名稱 產品型號</p>
                            <p>公升數</p>
                            <p>耗電量</p>
                            <p>$XXXXX</p>
                        </div>
                        <h3>冰箱：</h3>
                        <div id="plan4_refrigerator">
                            <p>品牌名稱 產品型號</p>
                            <p>EF值</p>
                            <p>$XXXXX</p>
                        </div>
                        <h3>電視：</h3>
                        <div id="plan4_tv">
                            <p>品牌名稱 產品型號</p>
                            <p>耗電量</p>
                            <p>$XXXXX</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 查詢結果結束 -->
    <div class="container" id="blank">
        <br>
    </div>
    <!-- Footer -->
    <footer class="page-footer font-small">
        <div class="footer-copyright text-left py-3">
            <sub>
                <div>Icons made by <a href="https://www.flaticon.com/authors/freepik" title="Freepik">Freepik</a>
                </div>
            </sub>
        </div>
    </footer>

    <!-- Footer -->

    <Script type="text/JavaScript">

$(document).ready(function() {
    $("#search").click(function() {
        var washingMachine = $("#washingMachine").val();
        var refrigerator = $("#refrigerator").val();
        var tv = $("#tv").val();
        var search = washingMachine + refrigerator + tv;
        if (!washingMachine) {
            alert("洗衣機沒填哦！");
        }
        if(!refrigerator){
            alert("冰箱沒填哦！");
        }
        if(!tv){
            alert("電視沒填哦！");
        }
        console.log(search.length);
        if (search.length==3||search.length==4) 
        {
            $.ajax({
            type: "GET",
            url: "https://eeenviorment.000webhostapp.com/vip_test.php?search="+search,
            //url:"vip_test.php?search="+search,
            dataType: "json",
            success: function(response) 
            {
                // 成功要做的動作
                console.log(response);
                WriteResult(1,response.plan1);
                WriteResult(2,response.plan2);
                WriteResult(3,response.plan3);
                WriteResult(4,response.plan4); 
            },
            error: function(jqXHR,textStatus,errorThrown) 
            {
                alert("發生錯誤: " + jqXHR.status);
                console.log("1 非同步呼叫返回失敗,XMLHttpResponse.readyState:"+jqXHR.readyState);
                console.log("2 非同步呼叫返回失敗,XMLHttpResponse.status:"+jqXHR.status);
                console.log("3 非同步呼叫返回失敗,textStatus:"+textStatus);
                console.log("4 非同步呼叫返回失敗,errorThrown:"+errorThrown);
            }
            })
            $('#result_area').show();
        }
    })
        
    function WriteResult(planValue,data) {
        $('#plan'+planValue+'_total').html(data.total)
        $('#plan'+planValue+'_washingMachine').html('<p>'+data.washingMachine+'</p>')
        $('#plan'+planValue+'_refrigerator').html('<p>'+data.refrigerator+'</p>')
        $('#plan'+planValue+'_tv').html('<p>'+data.tv+'</p>')
    }
});
</Script>
</body>

</html>